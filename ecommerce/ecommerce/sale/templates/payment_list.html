{% extends 'base.html' %}
{% block content %}
{% load humanize %}
<h2>My Payments</h2>

{% if payments %}
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Order</th>
                <th>Amount</th>
                <th>Method</th>
                <th>Date</th>
                <th>Slip</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in payments %}
            <tr class="align-middle">
                <td>{{ payment.id }}</td>
                <td>{{ payment.order.id }}</td>
                <td>{{ payment.amount|floatformat:2|intcomma }}</td>
                <td>{{ payment.method|title }}</td>
                <td>{{ payment.created_at|date:"d-m-Y H:i" }}</td>
                <td>
                    {% if payment.payment_slip %}
                        <img src="{{ payment.payment_slip.url }}" width="50" height="50" style="object-fit:cover; border-radius:4px;">
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'payment_detail' payment.id %}" class="btn btn-info btn-sm">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>You have no payments yet.</p>
{% endif %}
{% endblock %}
